!function(a){var b=a("form[data-mri-form]"),c=a("input[data-mri-ingredient]",b),d=a("select[data-mri-type-repas]",b),e=a("div[data-mri-results]"),f=a("button[data-mri-load-more]"),g=a("div[data-mri-result-template]"),h=g.html();g.remove(),f.hide();var i={entree:"Entrée",platprincipal:"Plat principal",dessert:"Dessert",accompagnement:"Accompagnement",amusegueule:"Amuse gueule",boisson:"Boisson",confiserie:"Confiserie",sauce:"Sauce"};a.each(i,function(a,b){var c='<option value="'+a+'">'+b+"</option>";d.append(c)}),a("input[data-mri-ingredient], select[data-mri-type-repas]").on("change",function(){f.attr("data-mri-load-more-count",0),f.hide()});var j=function(){var b="http://localhost:8888?",g=c.val().replace(" ","+").toLowerCase();b+="aqt="+g,b+="&st=1";var i=d.val();for(var j in i)i.hasOwnProperty(j)&&(b+="&dt="+i[j]);b+="&sort=popularitydesc",0<parseInt(f.attr("data-mri-load-more-count"))&&(b+="&start="+f.attr("data-mri-load-more-count")),a.get(b,function(b){if(0<b.length){"0"==f.attr("data-mri-load-more-count")&&e.html("");for(var c in b)if(b.hasOwnProperty(c)){var d=a(h);a('[data-mri-result-template-value="titre"]',d).html(b[c].titre),a('[data-mri-result-template-value="description"]',d).html(b[c].description);for(var g=a('[data-mri-result-template-value="note"]',d),i="",j=g.attr("data-mri-result-template-star"),k=g.attr("data-mri-result-template-star"),l=0;l<b[c].note;l++)i+='<i class="'+j+'"></i>';for(l=b[c].note;5>l;l++)i+='<i class="'+k+'"></i>';g.html(i),a('[data-mri-result-template-value="nbvote"]',d).html(" (sur "+b[c].nbvote+" votes)"),a('[data-mri-result-template-value="difficulte"]',d).html("Difficulté : "+b[c].difficulte),a('[data-mri-result-template-value="prix"]',d).html("Prix : "+b[c].prix),a('[data-mri-result-template-value="preparation"]',d).html("Préparation : "+b[c].preparation),a('[data-mri-result-template-value="cuisson"]',d).html("Cuisson : "+b[c].cuisson),e.append(d)}var m=parseInt(f.attr("data-mri-load-more-count"))+10;f.attr("data-mri-load-more-count",m),f.show()}else f.hide()})};b.on("submit",function(a){a.preventDefault(),j()}),f.on("click",function(a){j()})}(jQuery);